
<!-- <mat-grid-list cols="4" rowHeight="100px">
  <mat-grid-tile
      ..*ngFor="let tile of tiles"
      [colspan]="tile.cols"
      [rowspan]="tile.rows"
      [style.background]="tile.color">
    {{tile.text}}
  </mat-grid-tile>
</mat-grid-list> -->


<mat-grid-list gutterSize='15px' cols="6" rowHeight="3:1">
  <mat-grid-tile class="item" [colspan]="isSmallScreen||isXSmallScreen || isTabletScreen?6:2" [rowspan]="1">
    <app-header (dateRangeEvent)="receiveDateRange($event)"></app-header></mat-grid-tile>
  <mat-grid-tile class="item" [colspan]="isSmallScreen||isXSmallScreen || isTabletScreen?6:4" [rowspan]="5">
    <!-- пары батареек -->
    <ngx-charts-bar-vertical-2d
      [tooltipDisabled]="false"
      [roundDomains]="true"
      [yAxisTicks]="yAxisTicksArr"
      [yAxisTickFormatting]="yAxisTickFormattingMulti"
      [trimYAxisTicks]="false"
      [scheme]="colorScheme"
      [schemeType]="schemeType"
      [noBarWhenZero]="noBarWhenZero"
      [barPadding]="2"
      [animations]="false"
      [groupPadding]="4"
      [results]="multi"
      [gradient]="gradient"
      [xAxis]="showXAxis"
      [yAxis]="showYAxis"
      [showXAxisLabel]="showXAxisLabel"
      [showYAxisLabel]="false"
      [showGridLines]="showGridLines"
      [roundDomains]="roundDomains"
      [xAxisLabel]="xAxisLabel"
      [yAxisLabel]="yAxisLabel"
      [rotateXAxisTicks]="rotateXAxisTicks">
      <ng-template #tooltipTemplate let-model="model">
        <p style="margin-top: 1rem;">{{tooltipText + model.number}}</p>
        <pre style="color:whitesmoke">{{(model.value + 1.75).toFixed(2)}} V</pre>
      </ng-template>
    </ngx-charts-bar-vertical-2d>
  </mat-grid-tile>
    <!-- style="padding: 0; border: none; max-height: 80vh; max-width: 30vw" -->
    <mat-grid-tile 
      [ngStyle]="{'box-shadow':'0px 4px 0px 0px '+ colorChange_Total.domain.toString()}" 
      class="item" 
      [colspan]="isSmallScreen || isXSmallScreen || isTabletScreen ? 6 : 2" 
      [rowspan]='4'>
            <!-- <div style="width: 100%; height: 100%;"> -->
      <ngx-charts-gauge style="width: 100%; height: 80%;"
        [valueFormatting]="yAxisTickFormattingMulti2"
        [axisTickFormatting]="batteryCharge"
        [scheme]="colorChange_Total"
        [startAngle]="-120"
        [angleSpan]="240"
        [results]="single"
        [min]="0"
        [max]="100"
        [units]="'Заряд батареи'">
      </ngx-charts-gauge>
            <!-- </div> -->
      </mat-grid-tile >
      <mat-grid-tile  class="item" [colspan]="isSmallScreen || isXSmallScreen || isTabletScreen? 6 : 2" [rowspan]='2' >
        <ngx-charts-line-chart
          [yAxisTickFormatting]="yAxisTickFormattingLine"
          [scheme]="colorChange"
          [showXAxisLabel]="showXAxisLabel"
          [showYAxisLabel]="showYAxisLabel"
          [xAxisLabel]="timeframe"
          [yAxisLabel]="'Контактор'"
          [curve]="linearCurveStep"
          [xAxis]="xAxis"
          [yAxis]="yAxis"
          [roundDomains]="false"
          [showGridLines]="false"
          [animations]="false"
          [results]="contractor">
        </ngx-charts-line-chart>
      </mat-grid-tile>
      <mat-grid-tile class="item" [colspan]="isSmallScreen||isXSmallScreen || isTabletScreen?6:2" [rowspan]='4'>
        <ngx-charts-line-chart
          [scheme]="colorChange_Temperature"
          [roundDomains]="true"
          [yAxisTickFormatting]="ChangeTemp"
          [showXAxisLabel]="showXAxisLabel"
          [showYAxisLabel]="false"
          [xAxisLabel]="timeframe"
          [xAxis]="xAxis"
          [yAxis]="yAxis"
          [results]="time_temp0">
        </ngx-charts-line-chart>
      </mat-grid-tile >
      <mat-grid-tile  class="item" [colspan]="isSmallScreen||isXSmallScreen || isTabletScreen?6:2" [rowspan]='4'>
        <ngx-charts-line-chart
          [scheme]="colorChange_ACDC"
          [showXAxisLabel]="showXAxisLabel"
          [showYAxisLabel]="false"
          [xAxisLabel]="timeframe"
          [roundDomains]="true"
          [xAxis]="xAxis"
          [yAxis]="yAxis"
          [roundDomains]="false"
          [animations]="false"
          [yAxisTickFormatting]="ChangeAmper"
          [results]="ACDC">
        <!-- [curve]="d3.shape.curveLinear" -->
        </ngx-charts-line-chart>
    </mat-grid-tile >
    <mat-grid-tile class="item" [colspan]="isSmallScreen||isXSmallScreen || isTabletScreen?6:2" [rowspan]='2' >
      <ngx-charts-line-chart
        [yAxisTickFormatting]="yAxisTickFormattingLine"
        [scheme]="colorChange"
        [showXAxisLabel]="showXAxisLabel"
        [showYAxisLabel]="showYAxisLabel"
        [xAxisLabel]="timeframe"
        [yAxisLabel]="'Балансирвка'"
        [curve]="linearCurveStep"
        [xAxis]="xAxis"
        [yAxis]="yAxis"
        [roundDomains]="false"
        [showGridLines]="false"
        [animations]="false"
        [results]="balance">
      <!-- [curve]="d3.shape.curveLinear" -->
      </ngx-charts-line-chart>
    </mat-grid-tile>
        <!-- [curve]="d3.shape.curveLinear" -->
    <!-- <div class="item ">
        <div class="box">
            <button class="switchButton " [ngClass]="{switched: contractor} " >Свитчер</button>
        </div>
    </div>
    <div class="item ">
        <div class="box">
            <button class="switchButton " [ngClass]="{switched: switcher} " >Контактор</button>
        </div>
    </div> -->

    <!-- <div class="item">
        <h3 style="padding: 1rem 2rem;">Изменить батарею</h3>
        <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
            <div class="btn-group mr-2" role="group" aria-label="First group">
                <button type="button" *ngFor="let battery of batteries; let i = index"
                    (click)="changeBattery(i)" class="btn btn-secondary"
                    [ngClass]="{active: i == currentBattery}">
                    {{i + 1}}
                </button>
            </div>
        </div>
    </div> -->
</mat-grid-list>

<ng-template #tooltipTemplate>
    This is the single point tooltip template
</ng-template>

<!-- <div *ngFor="let dataSource of server.datas ">
  {{dataSource.data[0].voltages[0].index|json}}
</div> -->
