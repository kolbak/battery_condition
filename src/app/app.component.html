<app-header></app-header>

<div class="grid">
    <div class="item" style="max-height: 83vh;">
        <ngx-charts-bar-vertical-2d 
            [trimYAxisTicks]="false"
            [scheme]="colorScheme"
            [schemeType]="schemeType"
            [noBarWhenZero]="noBarWhenZero"
            [barPadding]="2" 
            [groupPadding]="16" 
            [results]="multi" 
            [gradient]="gradient" 
            [xAxis]="showXAxis" 
            [yAxis]="showYAxis"
            [showXAxisLabel]="showXAxisLabel"
            [showYAxisLabel]="showYAxisLabel"  
            [showDataLabel]="showDataLabel"
            [showGridLines]="showGridLines"
            [roundDomains]="roundDomains"
            [xAxisLabel]="xAxisLabel"
            [yAxisLabel]="yAxisLabel"
            [rotateXAxisTicks]="rotateXAxisTicks"
            (select)="onSelect($event)" 
            (activate)="onActivate($event)" 
            (deactivate)="onDeactivate($event)">
        </ngx-charts-bar-vertical-2d>
        <!-- <ngx-chart1></ngx-chart1> -->
    </div>
    <!-- style="padding: 0; border: none; max-height: 80vh; max-width: 30vw" -->
    <div class="item" style="position: relative;">
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0">
            <!-- <div style="width: 100%; height: 100%;"> -->
                <ngx-charts-gauge
                    [scheme]="{
                        domain: ['#00ff00']
                    }"
                    [startAngle]="-120"
                    [angleSpan]="240"
                    [results]="single"
                    [min]="0"
                    [max]="100"
                    [units]="'% Заряда батареи'"
                    (select)="onSelect($event)"
                    (activate)="onActivate($event)"
                    (deactivate)="onDeactivate($event)"
                    >
                </ngx-charts-gauge>
            <!-- </div> -->
        </div>
    </div>
    <div class="item" >
        <ngx-charts-line-chart
            [scheme]="colorScheme"
            [showXAxisLabel]="showXAxisLabel"
            [showYAxisLabel]="showYAxisLabel"
            [xAxisLabel]="'Время'"
            [yAxisLabel]="'Температура, °C'"
            [xAxis]="xAxis"
            [yAxis]="yAxis"
            [results]="time_temp0"
            (select)="onSelect($event)"
            (activate)="onActivate($event)"
            (deactivate)="onDeactivate($event)"
            >
        </ngx-charts-line-chart>
    </div>
    <div class="item">
        <ngx-charts-line-chart
            [scheme]="colorScheme"
            [showXAxisLabel]="showXAxisLabel"
            [showYAxisLabel]="showYAxisLabel"
            [xAxisLabel]="'Время'"
            [yAxisLabel]="'Сила тока, A'"            
            [xAxis]="xAxis"
            [yAxis]="yAxis"
            [roundDomains]="false"
            [animations]="false"
            [results]="time_temp1"
            (select)="onSelect($event)"
            (activate)="onActivate($event)"
            (deactivate)="onDeactivate($event)"
        >
        <!-- [curve]="d3.shape.curveLinear" -->
        </ngx-charts-line-chart>
    </div>
    <div class="item">
        <ngx-charts-line-chart
            [scheme]="colorScheme"
            [showXAxisLabel]="showXAxisLabel"
            [showYAxisLabel]="showYAxisLabel"
            [yAxisLabel]="'Балансировка'"      
            [curve]="linearCurveStep"                  
            [xAxis]="xAxis"
            [yAxis]="yAxis"
            [roundDomains]="false"
            [showGridLines]="false"
            [animations]="false"
            [results]="balance"
            (select)="onSelect($event)"
            (activate)="onActivate($event)"
            (deactivate)="onDeactivate($event)"
        >
        <!-- [curve]="d3.shape.curveLinear" -->
        </ngx-charts-line-chart>
    </div>
    <div class="item">
        <ngx-charts-line-chart
            [yAxisTickFormatting]="yAxisTickFormatting"
            [scheme]="colorScheme"
            [showXAxisLabel]="showXAxisLabel"
            [showYAxisLabel]="showYAxisLabel"
            [xAxisLabel]="'Время'"
            [yAxisLabel]="'Контактор'"
            [curve]="linearCurveStep"            
            [xAxis]="xAxis"
            [yAxis]="yAxis"
            [yAxisTicks]="RightTickValues"
            [roundDomains]="false"
            [showGridLines]="false"
            [animations]="false"
            [results]="contractor"
            (select)="onSelect($event)"
            (activate)="onActivate($event)"
            (deactivate)="onDeactivate($event)"
        ></ngx-charts-line-chart>
    </div>
        <!-- [curve]="d3.shape.curveLinear" -->
    <!-- <div class="item ">
        <div class="box">
            <button class="switchButton " [ngClass]="{switched: contractor} " >Свитчер</button>
        </div>
    </div>
    <div class="item ">
        <div class="box">
            <button class="switchButton " [ngClass]="{switched: switcher} " >Контактор</button>
        </div>
    </div> -->
    
</div>

<div class="item" style="margin: 1rem 2rem; max-width: 100vw; margin-bottom: 3rem;">
    <h3 style="padding: 1rem 2rem;">Изменить батарею</h3>
    <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
        <div class="btn-group mr-2" role="group" aria-label="First group">
            <button type="button" *ngFor="let battery of batteries; let i = index" 
                (click)="changeBattery(i)" class="btn btn-secondary"
                [ngClass]="{active: i == currentBattery}">
                {{i + 1}}
            </button>
        </div>
    </div>
  </div>

<!-- <div *ngFor="let dataSource of server.datas ">
  {{dataSource.data[0].voltages[0].index|json}}
</div> -->