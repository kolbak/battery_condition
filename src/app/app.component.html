<app-header></app-header>

<div class="grid">
    <div class="item" style="max-height: 83vh;">
        <ngx-charts-bar-vertical-2d
            [tooltipDisabled]="false"
            [roundDomains]="true"
            [yAxisTicks]="yAxisTicksArr"
            [yAxisTickFormatting]="yAxisTickFormattingMulti"
            [trimYAxisTicks]="false"
            [scheme]="colorScheme"
            [schemeType]="schemeType"
            [noBarWhenZero]="noBarWhenZero"
            [barPadding]="0" 
            [groupPadding]="0" 
            [results]="multi" 
            [gradient]="gradient" 
            [xAxis]="showXAxis" 
            [yAxis]="showYAxis"
            [showXAxisLabel]="showXAxisLabel"
            [showYAxisLabel]="showYAxisLabel"
            [showGridLines]="showGridLines"
            [roundDomains]="roundDomains"
            [xAxisLabel]="xAxisLabel"
            [yAxisLabel]="yAxisLabel"
            [rotateXAxisTicks]="rotateXAxisTicks"
            (select)="onSelect($event)" 
            (activate)="onActivate($event)" 
            (deactivate)="onDeactivate($event)">
            <ng-template #tooltipTemplate let-model="model">
                Заряд
                <pre style="color:whitesmoke">{{(model.value + 1.75).toFixed(2)}}</pre>
            </ng-template>
        </ngx-charts-bar-vertical-2d>
        <!-- <ngx-chart1></ngx-chart1> -->
    </div>
    <!-- style="padding: 0; border: none; max-height: 80vh; max-width: 30vw" -->
    <div class="item" style="position: relative;">
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0">
            <!-- <div style="width: 100%; height: 100%;"> -->
                <ngx-charts-gauge
                    [scheme]="colorChange_Total"
                    [startAngle]="-120"
                    [angleSpan]="240"
                    [results]="single"
                    [min]="0"
                    [max]="100"
                    [units]="'Заряда батареи'"
                    (select)="onSelect($event)"
                    (activate)="onActivate($event)"
                    (deactivate)="onDeactivate($event)"
                    >
                </ngx-charts-gauge>
            <!-- </div> -->
        </div>
    </div>
    <div class="item" >
        <ngx-charts-line-chart
            [scheme]="colorChange_Temperature"
            [showXAxisLabel]="showXAxisLabel"
            [showYAxisLabel]="showYAxisLabel"
            [xAxisLabel]="timeframe"
            [yAxisLabel]="'Температура, °C'"
            [xAxis]="xAxis"
            [yAxis]="yAxis"
            [curve]="linearCurveCardinal" 
            [results]="time_temp0"
            (select)="onSelect($event)"
            (activate)="onActivate($event)"
            (deactivate)="onDeactivate($event)"
            >
        </ngx-charts-line-chart>
    </div>
    <div class="item">
        <ngx-charts-line-chart
            [scheme]="colorChange_ACDC"
            [showXAxisLabel]="showXAxisLabel"
            [showYAxisLabel]="showYAxisLabel"
            [xAxisLabel]="timeframe"
            [yAxisLabel]="'Сила тока, A'"            
            [xAxis]="xAxis"
            [yAxis]="yAxis"
            [curve]="linearCurveCardinal" 
            [roundDomains]="false"
            [animations]="false"
            [results]="time_temp1"
            (select)="onSelect($event)"
            (activate)="onActivate($event)"
            (deactivate)="onDeactivate($event)"
        >
        <!-- [curve]="d3.shape.curveLinear" -->
        </ngx-charts-line-chart>
    </div>
    <div class="item">
        <ngx-charts-line-chart
            [yAxisTickFormatting]="yAxisTickFormattingLine"
            [scheme]="colorChange"
            [showXAxisLabel]="showXAxisLabel"
            [showYAxisLabel]="showYAxisLabel"
            [xAxisLabel]="timeframe"
            [yAxisLabel]="'Балансировка'"      
            [curve]="linearCurveStep"                  
            [xAxis]="xAxis"
            [yAxis]="yAxis"
            [roundDomains]="false"
            [showGridLines]="false"
            [animations]="false"
            [results]="balance"
        >
        <!-- [curve]="d3.shape.curveLinear" -->
        </ngx-charts-line-chart>
    </div>
    <div class="item">
        <ngx-charts-line-chart
            [yAxisTickFormatting]="yAxisTickFormattingLine"
            [scheme]="colorChange"
            [showXAxisLabel]="showXAxisLabel"
            [showYAxisLabel]="showYAxisLabel"
            [xAxisLabel]="timeframe"
            [yAxisLabel]="'Контактор'"
            [curve]="linearCurveStep"            
            [xAxis]="xAxis"
            [yAxis]="yAxis"
            [roundDomains]="false"
            [showGridLines]="false"
            [animations]="false"
            [results]="contractor"
        ></ngx-charts-line-chart>
    </div>
        <!-- [curve]="d3.shape.curveLinear" -->
    <!-- <div class="item ">
        <div class="box">
            <button class="switchButton " [ngClass]="{switched: contractor} " >Свитчер</button>
        </div>
    </div>
    <div class="item ">
        <div class="box">
            <button class="switchButton " [ngClass]="{switched: switcher} " >Контактор</button>
        </div>
    </div> -->
    
    <!-- <div class="item">
        <h3 style="padding: 1rem 2rem;">Изменить батарею</h3>
        <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
            <div class="btn-group mr-2" role="group" aria-label="First group">
                <button type="button" *ngFor="let battery of batteries; let i = index" 
                    (click)="changeBattery(i)" class="btn btn-secondary"
                    [ngClass]="{active: i == currentBattery}">
                    {{i + 1}}
                </button>
            </div>
        </div>
    </div> -->
</div>

<ng-template #tooltipTemplate >
    This is the single point tooltip template
</ng-template>
<!-- <div *ngFor="let dataSource of server.datas ">
  {{dataSource.data[0].voltages[0].index|json}}
</div> -->